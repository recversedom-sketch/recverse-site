---
import "../styles/global.css";
import "../styles/theme.css";
import "../styles/fonts.css"; // Sprint 4 (self-hosted), siehe weiter unten

import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import SEO from "../components/SEO.astro";

type Props = {
  title?: string;
  description?: string;
  image?: string;
  noindex?: boolean;
};

const {
  title,
  description,
  image,
  noindex,
} = Astro.props as Props;

const canonicalSite = "https://www.recverse.ch";
const pathname = Astro.url?.pathname ?? "/";
const canonical = `${canonicalSite}${pathname.endsWith("/") ? pathname : `${pathname}/`}`;
---

<!doctype html>
<html lang={pathname === "/en/" || pathname.startsWith("/en/") ? "en" : "de-CH"}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Theme -->
    <meta name="theme-color" content="#05070c" />

    <!-- Preloads (Sprint 4 fonts) -->
    <link rel="preload" href="/fonts/inter/Inter-Variable.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="/fonts/space-grotesk/SpaceGrotesk-Variable.woff2" as="font" type="font/woff2" crossorigin />

    <SEO
      title={title}
      description={description}
      image={image}
      noindex={noindex}
      structuredData={{
        legalName: "Recverse",
        addressLocality: "Dietwil",
        addressRegion: "Aargau",
      }}
    />

    <!-- Optional: canonical already handled by SEO, keep only if you want double-safety -->
    <link rel="canonical" href={canonical} />
  </head>

  <body>
    <a class="skip" href="#content">Zum Inhalt</a>
    <Navbar />
    <main id="content">
      <slot />
    </main>
    <Footer />
  </body>
</html>
