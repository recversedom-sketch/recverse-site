---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const sorted = posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Blog - RecVerse">
  <section class="mx-auto max-w-4xl px-4 py-16">
    <h1 class="text-3xl font-semibold">Blog</h1>
    <p class="mt-3 text-zinc-300">Kurz, konkret, umsetzungsnah.</p>

    <div class="mt-10 grid gap-4">
      {sorted.map((p) => (
        <a class="rounded-2xl border border-zinc-800/60 bg-zinc-900/20 p-6 hover:bg-zinc-900/30 transition"
           href={"/blog/" + p.slug + "/"} >
          <div class="text-lg font-semibold">{p.data.title}</div>
          <div class="mt-1 text-sm text-zinc-400">{p.data.description}</div>
          <div class="mt-2 text-xs text-zinc-500">{p.data.date.toLocaleDateString("de-CH")}</div>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>
