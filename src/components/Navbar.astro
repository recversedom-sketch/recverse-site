---
const pathname = Astro.url?.pathname ?? "/";

const links = [
  { href: "/", label: "Home" },
  { href: "/services", label: "Leistungen" },
  { href: "/shop", label: "RecVerseShop" },
  { href: "/blog", label: "Blog" },
];

const isActive = (href) => (href === "/" ? pathname === "/" : pathname.startsWith(href));
---

<header class="sticky top-0 z-50">
  <div class="rc-container">
    <div class="rc-card-strong mt-4 px-4 py-3" style="backdrop-filter: blur(8px);">
      <div class="flex items-center justify-between gap-3">
        <a href="/" class="flex items-center gap-3 no-underline">
          <span
            class="inline-flex h-9 w-9 items-center justify-center rounded-2xl"
            style="background: rgb(var(--accent) / 0.14); border: 1px solid rgb(var(--accent) / 0.30);"
          >
            <span style="color: rgb(var(--accent)); font-weight: 900;">R</span>
          </span>
          <div class="leading-tight">
            <div class="font-semibold">RecVerse</div>
            <div class="text-xs rc-muted">KI • Transformation • Web</div>
          </div>
        </a>

        <!-- Desktop -->
        <nav class="hidden md:flex items-center gap-1">
          {links.map((l) => (
            <a
              href={l.href}
              class="rounded-xl px-3 py-2 text-sm transition"
              style={isActive(l.href)
                ? "color: rgb(var(--text)); background: rgb(var(--surface-2)/0.40); border: 1px solid rgb(var(--border)/0.45);"
                : "color: rgb(var(--muted));"}
            >
              {l.label}
            </a>
          ))}
          <a href="/contact" class="rc-btn rc-btn-primary ml-2">Anfrage</a>
        </nav>

        <!-- Mobile (no JS) -->
        <details class="md:hidden">
          <summary class="rc-btn" style="list-style: none;" aria-label="Menue">
            Menue
          </summary>

          <div class="mt-3 rc-card px-3 py-3">
            <nav class="flex flex-col">
              {links.map((l) => (
                <a
                  href={l.href}
                  class="rounded-xl px-3 py-3 text-sm transition"
                  style={isActive(l.href)
                    ? "color: rgb(var(--text)); background: rgb(var(--surface-2)/0.40); border: 1px solid rgb(var(--border)/0.45);"
                    : "color: rgb(var(--muted));"}
                >
                  {l.label}
                </a>
              ))}
              <a href="/contact" class="rc-btn rc-btn-primary mt-2">Anfrage</a>
            </nav>
          </div>
        </details>
      </div>
    </div>
  </div>
</header>
